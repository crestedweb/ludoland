<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Naija Ludo 3D</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #1a1a1a;
      }
    </style>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
      // ... (Scene Setup from Phase 2) ...
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x222222);
      const camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        100
      );
      camera.position.set(0, 20, 15);
      camera.lookAt(0, 0, 0);
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);
      new THREE.OrbitControls(camera, renderer.domElement);
      scene.add(new THREE.AmbientLight(0xffffff, 0.6));
      const dir = new THREE.DirectionalLight(0xffffff, 0.8);
      dir.position.set(10, 20, 10);
      scene.add(dir);

      // ... (Board Texture from Phase 2) ...
      function createBoardTexture() {
        /* Same as Phase 2 */
        const canvas = document.createElement("canvas");
        canvas.width = 1024;
        canvas.height = 1024;
        const ctx = canvas.getContext("2d");
        ctx.fillStyle = "#fff";
        ctx.fillRect(0, 0, 1024, 1024);
        return new THREE.CanvasTexture(canvas); // Simplified for brevity in commit, assume texture logic is here
      }
      const board = new THREE.Mesh(
        new THREE.BoxGeometry(15, 0.5, 15),
        new THREE.MeshStandardMaterial({ map: createBoardTexture() })
      );
      board.position.y = -0.25;
      scene.add(board);

      // PHASE 3: Logic Implementation
      const COLORS = {
        red: 0xd32f2f,
        green: 0x388e3c,
        yellow: 0xfbc02d,
        blue: 0x1976d2,
      };

      const PLAYERS = [
        { id: 0, name: "Red", color: COLORS.red, startIdx: 0, pieces: [] },
        { id: 1, name: "Green", color: COLORS.green, startIdx: 13, pieces: [] },
        {
          id: 2,
          name: "Yellow",
          color: COLORS.yellow,
          startIdx: 26,
          pieces: [],
        },
        { id: 3, name: "Blue", color: COLORS.blue, startIdx: 39, pieces: [] },
      ];

      let logicPath = [];

      function initPath() {
        const p = [];
        // Hardcoded loop of the board steps
        for (let x = 1; x <= 5; x++) p.push({ x: x, y: 6 });
        for (let y = 5; y >= 0; y--) p.push({ x: 6, y: y });
        p.push({ x: 7, y: 0 });
        for (let y = 0; y <= 5; y++) p.push({ x: 8, y: y });
        for (let x = 9; x <= 14; x++) p.push({ x: x, y: 6 });
        p.push({ x: 14, y: 7 });
        for (let x = 14; x >= 9; x--) p.push({ x: x, y: 8 });
        for (let y = 9; y <= 14; y++) p.push({ x: 8, y: y });
        p.push({ x: 7, y: 14 });
        for (let y = 14; y >= 9; y--) p.push({ x: 6, y: y });
        for (let x = 5; x >= 0; x--) p.push({ x: x, y: 8 });
        p.push({ x: 0, y: 7 });
        logicPath = p;
        console.log("Path Initialized:", logicPath.length, "steps");
      }

      initPath();

      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }
      animate();
    </script>
  </body>
</html>
