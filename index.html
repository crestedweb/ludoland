<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Naija Ludo 3D</title>
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: #1a1a1a;
      }
    </style>
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script>
      // SETUP
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x222222);
      const camera = new THREE.PerspectiveCamera(
        45,
        window.innerWidth / window.innerHeight,
        0.1,
        100
      );
      camera.position.set(0, 20, 15);
      camera.lookAt(0, 0, 0);
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);
      new THREE.OrbitControls(camera, renderer.domElement);
      scene.add(new THREE.AmbientLight(0xffffff, 0.6));
      const dir = new THREE.DirectionalLight(0xffffff, 0.8);
      dir.position.set(10, 20, 10);
      scene.add(dir);

      // PHASE 2: Board Generation
      function createBoardTexture() {
        const canvas = document.createElement("canvas");
        canvas.width = 1024;
        canvas.height = 1024;
        const ctx = canvas.getContext("2d");
        const step = 1024 / 15;

        // White Base
        ctx.fillStyle = "#fff";
        ctx.fillRect(0, 0, 1024, 1024);

        // Bases
        const drawBase = (x, y, color) => {
          ctx.fillStyle = color;
          ctx.fillRect(x * step, y * step, 6 * step, 6 * step);
          ctx.fillStyle = "#fff";
          ctx.fillRect((x + 1) * step, (y + 1) * step, 4 * step, 4 * step);
        };
        drawBase(0, 0, "#d32f2f");
        drawBase(9, 0, "#388e3c");
        drawBase(9, 9, "#fbc02d");
        drawBase(0, 9, "#1976d2");

        // Grid & Paths
        ctx.strokeStyle = "#888";
        ctx.lineWidth = 2;
        const tile = (x, y, c) => {
          ctx.fillStyle = c;
          ctx.fillRect(x * step, y * step, step, step);
          ctx.strokeRect(x * step, y * step, step, step);
        };

        for (let i = 0; i < 15; i++) {
          for (let j = 0; j < 15; j++) {
            if (
              !(
                (i < 6 && j < 6) ||
                (i > 8 && j < 6) ||
                (i > 8 && j > 8) ||
                (i < 6 && j > 8)
              )
            )
              ctx.strokeRect(i * step, j * step, step, step);
          }
        }
        // Home Runs
        for (let i = 1; i < 6; i++) tile(i, 7, "#d32f2f");
        for (let j = 1; j < 6; j++) tile(7, j, "#388e3c");
        for (let i = 9; i < 14; i++) tile(i, 7, "#fbc02d");
        for (let j = 9; j < 14; j++) tile(7, j, "#1976d2");

        return new THREE.CanvasTexture(canvas);
      }

      const boardGeo = new THREE.BoxGeometry(15, 0.5, 15);
      const boardMat = new THREE.MeshStandardMaterial({
        map: createBoardTexture(),
      });
      const board = new THREE.Mesh(boardGeo, boardMat);
      board.position.y = -0.25;
      scene.add(board);

      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }
      animate();
    </script>
  </body>
</html>
